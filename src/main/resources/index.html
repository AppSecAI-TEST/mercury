<!DOCTYPE html>
<html>
<head>
    <title>Mercury</title>
    <link rel="stylesheet" href="css/lato.css">
    <link rel="stylesheet" href="css/font-awesome.css">
    <link rel="stylesheet" href="css/bootstrap.min.css">
    <link rel="stylesheet" href="css/style.css">
</head>
<body>
  <header>
    <div class="controls pull-left"></div>
    <div class="mercury-logo center-block">
      <img src="images/icon64.png">
    </div>

    <div class="right pull-right" style="display: none">
      <ul>
        <li class="btn btn-primary"><i class="fa fa-envelope fa-lg"></i><span class="label label-danger super">4</span></li>
        <li class="btn btn-primary"><i class="fa fa-cog fa-lg"></i></li>
      </ul>
    </div>
  </header>

  <section class="body">
    <div id="left"></div>
    <div id="middle">
      <div id="alerts"></div>
      <div id="main"></div>
    </div>
    <div id="right">
      <div class="tickers"></div>
      <div class="orders"></div>
      <div class="trades"></div>
    </div>
  </section>

  <footer><span>Connected</span></footer>

  <script type="text/template" id="template-alert">
    <div class="alert alert-<%= level %> alert-dismissible">
      <button type="button" class="close" data-dismiss="alert" aria-label="Close">
        <span aria-hidden="true">&times;</span>
      </button>
      <p><%= content %></p>
    </div>
  </script>
  <script type="text/template" id="template-footer">
    <span>
      <i class="signal signal-<%= connected ? '4' : '0' %>"></i>&nbsp;&nbsp;
      <%= connected ? 'Connected to' : 'Diconnected from' %> orderbook server
    </span>
  </script>
  <script type="text/template" id="template-controls">
    <button class="back btn btn-link <%= hasBack ? '' : 'disabled' %>">
      <i class="fa fa-lg fa-angle-left"></i>
    </button>
    <button class="forward btn btn-link <%= hasForward ? '' : 'disabled' %>">
      <i class="fa fa-lg fa-angle-right"></i>
    </button>
  </script>
  <script type="text/template" id="template-ticker">
    <svg class="chart"></svg>
    <span class="pair"><%= pair.join('/') %></span>
    <span class="last"><%= last %></span>
    <span class="change <%= (change > 0) ? 'text-success' : (change < 0) ? 'text-danger' : 'text-warning' %>">
      <i class="fa fa-lg <%= (change > 0) ? 'fa-caret-up' : (change < 0) ? 'fa-caret-down' : 'fa-minus' %>"></i>
      <span>&nbsp;<%= change %>%</span>
    </span>
  </script>
  <script type="text/template" id="template-navbar">
    <div class="upper">
      <span class="balance"><i class="fa fa-bitcoin symbol"></i><%= balance %></span>
    </div>
    <hr class="no-margin">
    <div class="lower">
      <div class="btn-group-vertical" data-toggle="buttons-radio">
        <a href="#" class="home btn btn-primary <%= page.id === 'home' ? 'active' : '' %>"><i class="fa fa-home"></i> Home</a>
        <a href="#transactions" class="transactions btn btn-primary <%= page.id === 'transactions' ? 'active' : '' %>"><i class="fa fa-list"></i> Transactions</a>
        <a href="#trades" class="data btn btn-primary <%= page.id === 'trades' ? 'active' : '' %>"><i class="fa fa-exchange"></i> Trades</a>
      </div>
    </div>
  </script>
  <script type="text/template" id="template-transactions">
    <table class="table table-bordered table-hover col-xs-12">
      <thead>
        <tr class="small"><td></td><td>Coin</td><td>Amount</td><td>Date</td><td>Transaction</td><td></td></tr>
      </thead>
      <tbody></tbody>
    </table>
  </script>
  <script type="text/template" id="template-transactions-row">
  <% var explorerUrl = {
    btc: 'https://blockchain.info/tx/',
    ltc: 'http://block-explorer.com/tx/',
    doge: 'http://dogechain.info/tx/',
    btct: 'https://www.biteasy.com/testnet/transactions/',
    ltct: 'https://chain.so/tx/LTCTEST/'
  }[coin.toLowerCase()] + id %>
    <td class="text-center">
      <i class="fa <%= !depth ? 'fa-asterisk text-warning' : depth < 6 ? 'fa-clock-o text-info' : 'fa-check text-success' %>"></i>
    </td>
    <td class="small"><%= coin %></td>
    <td class="small text-<%= value > 0 ? 'success' : 'danger' %>"><%= (value > 0 ? '+' : '') + value %></td>
    <td class="small"><%= window.moment(date).format('l H:mm') %></td>
    <td class="small">
      <% if(type === 'payment') { %>
      <span class="text-<%= value > 0 ? 'success' : 'danger' %>">
        <i class="fa fa-sign-<%= value > 0 ? 'in' : 'out' %>"></i>&nbsp;
        <%= value > 0 ? 'Received' : 'Sent' %>
      </span>
      <strong>
        <%= address !== 'self' ? ' ' + (value < 0 ? sent : value) : '' %>&nbsp;
        <span class="alt"><%= coin %></span>
      </strong>&nbsp;
      <%= value > 0 ? 'with' : 'to' %>&nbsp;
      <%= address %>
      <% } else if (type === 'trade') { %>
      <span>
        <span class="<%= trade.buy ? 'text-success' : 'text-danger' %>">
          <i class="fa fa-exchange"></i>&nbsp;
          <%= trade.buy ? 'Bought' : 'Sold' %>&nbsp;
        </span>
        <strong>
          <%= trade.quantities[0] %>&nbsp;
          <span class="alt"><%= trade.coins[0].toUpperCase() %></span>
        </strong>
        <span> @ </span>
        <strong>
          <%= trade.price %>&nbsp;
          <span class="alt"><%= trade.coins[1].toUpperCase() %></span>
        </strong>
        <span>&nbsp;&nbsp;(<%= which === 'bailin' ? '<span class="text-info">Deposit</span>' : which === 'payout' ? '<span class="text-success">Payout</span>' : '<span class="text-warning"><i class="fa fa-warning"></i> Refund</span>' %>)</span>
      </span>
      <% } %>
    </td>
    <td class="small"><button class="btn btn-link btn-sm" onClick="desktop.browse('<%= explorerUrl %>')"><i class="fa fa-external-link"></i></button></td>
  </script>
  <script type="text/template" id="template-receive">
    <br>
    <div class="row col-xs-9 col-xs-push-2">
      <h2>Receive Coins</h2><br>
      <div class="dropdown dropdown-coin pull-left">
        <a class="dropdown-toggle" data-toggle="dropdown" href="#"><span class="value">BTC</span> <span class="caret"></span></a>
        <ul class="dropdown-menu"></ul>
      </div>

      <div class="pull-right qr"></div>
      <div style="clear:both"></div>
    </div>
    <br>
    <div class="row col-xs-9 col-xs-push-2">
      <div class="input-group col-xs-12 address">
        <span class="btn btn-primary generate input-group-addon"><i class="fa fa-refresh"></i></span>
        <input type="text" class="form-control value" onClick="this.setSelectionRange(0, this.value.length)" readonly>
        <span class="btn btn-default input-group-addon copy"><i class="fa fa-copy"></i></span>
      </div>
    </div>
  </script>
  <script type="text/template" id="template-trade">
    <br>
    <div class="trade-pair">
      <div class="col-xs-2 col-xs-push-2"><div class="dropdown dropdown-coin pull-left">
        <a class="dropdown-toggle" data-toggle="dropdown" href="#"><span class="value"></span> <span class="caret"></span></a>
        <ul class="dropdown-menu"></ul>
      </div></div>
      <div class="separator col-xs-2 col-xs-push-3">/</div>
      <div class="col-xs-2 col-xs-push-4"><div class="dropdown dropdown-coin pull-right">
        <a class="dropdown-toggle" data-toggle="dropdown" href="#"><span class="value"></span> <span class="caret"></span></a>
        <ul class="dropdown-menu"></ul>
      </div></div>
    </div>
    <br><br><br><br>
    <div class="form col-xs-10 col-xs-push-1">
      <div class="row">
        <div class="btn-group col-xs-12 buysell" data-toggle="buttons-radio">
          <button class="btn btn-default buy active">Buy</button>
          <button class="btn btn-default sell">Sell</button>
        </div>
      </div>
      <br>
      <div class="row values">
        <div class="form-group col-xs-4 price">
          <label>Price</label>
          <div class="input-group">
            <span class="input-group-addon symbol"></span>
            <input class="form-control" type="text" placeholder="0.00">
          </div>
        </div>
        <div class="form-group col-xs-4 quantity">
          <label>Quantity</label>
          <div class="input-group">
            <span class="input-group-addon symbol"></span>
            <input class="form-control" type="text" placeholder="0.00">
          </div>
          <span class="tiny">
            <strong>Balance:</strong> <span class="symbol"><%= symbols[0] %></span><%= balances[0] %>
          </span>
        </div>
        <div class="form-group col-xs-4 total">
          <label>Total</label>
          <div class="input-group">
            <span class="input-group-addon symbol"></span>
            <input class="form-control" type="text" placeholder="0.00">
          </div>
          <span class="tiny">
            <strong>Balance:</strong> <span class="symbol"><%= symbols[1] %></span><%= balances[1] %>
          </span>
        </div>
      </div>
      <br>
      <div class="row">
        <div class="col-xs-12 text-center overview">
          <p>You will <span class="type"></span> <strong><span class="quantity"></span> <span class="alt"></span></strong></p>
          <p>for <strong><span class="total"></span> <span class="alt"></span></strong></p>
        </div>
      </div>
      <br>
      <div class="row">
        <div class="col-xs-12">
          <button class="btn btn-lg btn-success pull-right accept">Accept Trade</button>
        </div>
      </div>
    </div>
  </script>
  <script type="text/template" id="template-trade-list">
    <h4>
      Pending Trades&nbsp;
      <% if(swaps.length) { %><strong>(<%= swaps.length %>)</strong><% } %>
    </h4>
    <ul class="list-group list"></ul>
  </script>
  <script type="text/template" id="template-trade-listitem">
    <% var steps = {
      STARTING: 0,
      EXCHANGING_KEYS: 10,
      EXCHANGING_BAILIN_HASHES: 20,
      EXCHANGING_SIGNATURES: 30,
      EXCHANGING_BAILINS: 40,
      WAITING_FOR_BAILIN: 50,
      WAITING_FOR_PAYOUT: 75, // alice-only
      COMPLETE: 100,
      WAITING_FOR_REFUND: 75,
      CANCELED: 100
    };
    var setupMessage = 'Setting up swap';
    var stepMessages = {
      STARTING: 'Starting swap',
      EXCHANGING_KEYS: setupMessage,
      EXCHANGING_BAILIN_HASHES: setupMessage,
      EXCHANGING_SIGNATURES: setupMessage,
      EXCHANGING_BAILINS: setupMessage,
      WAITING_FOR_BAILIN: 'Waiting for deposit transaction',
      WAITING_FOR_PAYOUT: 'Waiting for payout transaction', // alice-only
      COMPLETE: 'Complete',
      WAITING_FOR_REFUND: 'Waiting for refund transaction',
      CANCELED: 'Canceled'
    }; %>
    <li class="list-group-item trade small">
      <span><span class="<%= trade.buy ? 'text-success' : 'text-danger' %>"><%= trade.buy ? 'Bought' : 'Sold' %></span> <%= trade.quantities[0] %> <span class="alt"><%= trade.coins[0].toUpperCase() %></span> @ <%= trade.price %> <span class="alt"><%= trade.coins[1].toUpperCase() %></span></span><br>
      <span class="small"><%= stepMessages[step] %></span><br>
      <div class="progress">
        <div class="progress-bar" style="width: <%= steps[step] %>%"></div>
      </div>
    </li>
  </script>
  <script type="text/template" id="template-order-list">
    <h4>
      Open Orders&nbsp;
      <% if(orders.length) { %><strong>(<%= orders.length %>)</strong><% } %>
    </h4>
    <ul class="list-group list"></ul>
  </script>
  <script type="text/template" id="template-order">
    <li class="list-group-item order">
      <span class="small"><%= currencies.join('/').toUpperCase() %></span><br>
      <strong class="small"><span class="type" style="color: <%= bid ? 'green' : 'red' %>"><%= bid ? 'Buy' : 'Sell' %></span> <%= symbols[0] %><%= amount %> <span class="alt">@</span> <%= symbols[1] %><%= price %> </strong>
      <button class="btn btn-sm btn-link cancel" data-id="<%= id %>">Cancel</button>
    </li>
  </script>
  <script type="text/template" id="template-coinview">
    <div>
      <img class="logo" src="images/<%= id.toLowerCase() %>.png">

        <h3><%= name %><span class="alt"> - <%= id %></span></h3>

      <% if(synced) { %>
        <div class="balance"><strong class="symbol"><%= symbol %></strong><%= balance %> <span class="pending alt <%= pending === '0' ? ' hidden' : '' %>">(<strong class="symbol"><%= symbol %></strong><%= pending %> pending)</span>
        </div>
        <div class="buttons pull-right">
          <div class="btn-group">
            <a href="#trade/<%= id %>" class="btn btn-primary trade"><i class="fa fa-exchange"></i></a>
            <a href= "#send/<%= id %>" class="btn btn-primary send"><i class="fa fa-arrow-right"></i></a>
            <a href="#receive/<%= id %>" class="btn btn-primary receive"><i class="fa fa-arrow-left"></i></a>
            <button class="btn btn-primary transactions"><i class="fa fa-list"></i></button>
          </div>
        </div>
      <% } else if(connected) { %>
        <br>
        <div class="progress progress-striped active">
          <div class="progress-bar" role="progressbar"></div>
        </div>
        <span><i class="fa fa-clock-o text-info symbol"></i> Syncing blockchain...</span>
        <% if(typeof syncBlocks !== 'undefined') { %>
          <span class="sync pull-right">Block <span class="sync-blocks">0</span> / <%= syncBlocks %> - <span class="sync-date"></span></span>
        <% } %>

      <% } else { %>
        <p><i class="fa fa-clock-o text-warning symbol"></i> Connecting to network...</p>

      <% } %>
    </div>
  </script>
  <script type="text/template" id="template-send">
    <br>
    <div class="row col-xs-8 col-xs-push-2">
      <h2>Send Coins</h2><br>
    </div>
    <br>
    <div class="col-xs-8 col-xs-push-2">
      <div class="row">
        <div class="address col-xs-12">
          <label>Address</label>
          <div class="text-danger error small">The provided address is invalid.</div>
          <div class="input-group">
            <input type="text" class="form-control value" placeholder="Enter an address to send to">
            <span class="btn btn-default input-group-addon paste"><i class="fa fa-paste"></i></span>
          </div>
        </div>
      </div>
      <br>
      <div class="row">
        <div class="amount col-xs-7">
          <label>Amount<span class="alt hidden"> - (<span class="currency"></span>)</span></label>
          <div class="text-danger error small">The provided amount is invalid.</div>
          <div class="input-group">
            <span class="input-group-addon symbol"><i class="fa fa-btc"></i></span>
            <input type="text" class="form-control value" placeholder="0.00">
          </div>
        </div>
        <div class="col-xs-5 pull-bottom-right">
          <button class="btn btn-lg btn-info send pull-right"><i class="fa fa-lg fa-sign-out fa-white"></i> Send <span class="currency"></span></button>
        </div>
      </div>
    </div>
  </script>
  <script type="text/template" id="template-trades">
    <table class="table table-bordered table-hover col-xs-12">
      <thead>
        <tr class="small">
          <td>Date</td>
          <td>Pair</td>
          <td>Type</td>
          <td>Quantity</td>
          <td>Price</td>
          <td>Status</td>
        </tr>
      </thead>
      <tbody></tbody>
    </table>
  </script>
  <script type="text/template" id="template-trades-row">
    <% var steps = {
      STARTING: 0,
      EXCHANGING_KEYS: 10,
      EXCHANGING_BAILIN_HASHES: 20,
      EXCHANGING_SIGNATURES: 30,
      EXCHANGING_BAILINS: 40,
      WAITING_FOR_BAILIN: 50,
      WAITING_FOR_PAYOUT: 75, // alice-only
      COMPLETE: 100,
      WAITING_FOR_REFUND: 75,
      CANCELED: 100
    };
    var setupMessage = 'Setting up swap';
    var stepMessages = {
      STARTING: 'Starting swap',
      EXCHANGING_KEYS: setupMessage,
      EXCHANGING_BAILIN_HASHES: setupMessage,
      EXCHANGING_SIGNATURES: setupMessage,
      EXCHANGING_BAILINS: setupMessage,
      WAITING_FOR_BAILIN: 'Waiting for deposit transaction',
      WAITING_FOR_PAYOUT: 'Waiting for payout transaction', // alice-only
      COMPLETE: 'Complete',
      WAITING_FOR_REFUND: 'Waiting for refund transaction',
      CANCELED: 'Canceled'
    }; %>
    <tr>
      <td class="small"><%= window.moment(time * 1000).format('l H:mm') %></td>
      <td class="small"><%= trade.coins.join('/').toUpperCase() %></td>
      <td class="small text-<%= trade.buy ? 'success' : 'danger' %>"><%= trade.buy ? 'Buy' : 'Sell' %></td>
      <td class="small"><%= trade.quantities[0] %> <span class="alt"><%= trade.coins[0].toUpperCase() %></span></td>
      <td class="small"><%= trade.price %> <span class="alt"><%= trade.coins[1].toUpperCase() %></span></td>
      <td class="small alt">
        <span class="text-<%= step === 'CANCELED' ? 'warning' : step === 'COMPLETE' ? 'success' : 'info' %>">
        <%= step === 'CANCELED' ? '<i class="fa fa-warning"></i> ' : '' %> <%= stepMessages[step] %>
        </span>
      </td>
    </tr>
  </script>

  <script src="js/jquery-2.0.2.min.js"></script>
  <script src="js/bootstrap.min.js"></script>
  <script src="js/underscore-min.js"></script>
  <script src="js/backbone-min.js"></script>
  <script src="js/qrcode.min.js"></script>
  <script src="js/moment.min.js"></script>
  <script src="js/d3.js"></script>
  <script src="js/main.js"></script>
  <script src="js/models/Coin.js"></script>
  <script src="js/models/Trade.js"></script>
  <script src="js/models/Transaction.js"></script>
  <script src="js/models/Ticker.js"></script>
  <script src="js/models/History.js"></script>
  <script src="js/views/CoinView.js"></script>
  <script src="js/views/TradeView.js"></script>
  <script src="js/views/ReceiveView.js"></script>
  <script src="js/views/TransactionsView.js"></script>
  <script src="js/views/TradesView.js"></script>
  <script src="js/views/SendView.js"></script>
  <script src="js/views/NavbarView.js"></script>
  <script src="js/views/TickerView.js"></script>
  <script src="js/views/TickerListView.js"></script>
  <script src="js/views/OrderListView.js"></script>
  <script src="js/views/ControlsView.js"></script>
  <script src="js/views/TradeListView.js"></script>
  <script src="js/views/FooterView.js"></script>
  <script src="js/views/AlertsView.js"></script>
</body>
</html>